{
  "_args": [
    [
      "dyson@git+https://github.com/webpro/dyson.git",
      "C:\\Users\\Mary\\git\\last-minute"
    ]
  ],
  "_from": "git+https://github.com/webpro/dyson.git",
  "_id": "dyson@1.0.0",
  "_inCache": true,
  "_installable": true,
  "_location": "/dyson",
  "_phantomChildren": {},
  "_requested": {
    "hosted": {
      "directUrl": "https://raw.githubusercontent.com/webpro/dyson/master/package.json",
      "gitUrl": "git://github.com/webpro/dyson.git",
      "httpsUrl": "git+https://github.com/webpro/dyson.git",
      "shortcut": "github:webpro/dyson",
      "ssh": "git@github.com:webpro/dyson.git",
      "sshUrl": "git+ssh://git@github.com/webpro/dyson.git",
      "type": "github"
    },
    "name": "dyson",
    "raw": "dyson@git+https://github.com/webpro/dyson.git",
    "rawSpec": "git+https://github.com/webpro/dyson.git",
    "scope": null,
    "spec": "git+https://github.com/webpro/dyson.git",
    "type": "hosted"
  },
  "_requiredBy": [
    "#DEV:/"
  ],
  "_resolved": "git+https://github.com/webpro/dyson.git#bd6edf2a50d733d260d46ba3ed13264f3b141990",
  "_shasum": "05575710a2e69032371bdbe49ad8a7ccee59f0a9",
  "_shrinkwrap": null,
  "_spec": "dyson@git+https://github.com/webpro/dyson.git",
  "_where": "C:\\Users\\Mary\\git\\last-minute",
  "author": {
    "email": "lars@webpro.nl",
    "name": "Lars Kappert"
  },
  "bin": {
    "dyson": "./bin/dyson.js"
  },
  "bugs": {
    "url": "https://github.com/webpro/dyson/issues"
  },
  "dependencies": {
    "body-parser": "1.16.0",
    "cookie-parser": "1.4.3",
    "cors": "2.8.1",
    "express": "4.14.1",
    "lodash": "4.17.4",
    "ncp": "2.0.0",
    "request": "2.79.0",
    "require-directory": "2.1.1",
    "serve-favicon": "2.3.0",
    "when": "3.7.7"
  },
  "description": "Node server for dynamic, fake JSON.",
  "devDependencies": {
    "cross-env": "3.1.4",
    "dyson-generators": "0.1.1",
    "dyson-image": "0.1.3",
    "eslint": "3.15.0",
    "mocha": "3.2.0",
    "should": "8.4.0",
    "sinon": "1.17.7",
    "supertest": "3.0.0"
  },
  "engines": {
    "node": ">=6"
  },
  "gitHead": "bd6edf2a50d733d260d46ba3ed13264f3b141990",
  "homepage": "https://github.com/webpro/dyson#readme",
  "keywords": [
    "API",
    "JSON",
    "REST",
    "data",
    "dummy",
    "dynamic",
    "fake",
    "generator",
    "proxy",
    "response",
    "server"
  ],
  "license": "MIT",
  "main": "./lib/dyson.js",
  "name": "dyson",
  "optionalDependencies": {},
  "readme": "# dyson\r\n\r\nNode server for dynamic, fake JSON.\r\n\r\n``` bash\r\nnpm install dyson\r\n```\r\n\r\nSee [installation notes](#installation). Check out some [demo services](https://dyson-demo-npzwhgjdor.now.sh).\r\n\r\n[![Build Status](https://img.shields.io/travis/webpro/dyson.svg?style=flat)](https://travis-ci.org/webpro/dyson)\r\n[![npm package](https://img.shields.io/npm/v/dyson.svg?style=flat)](https://www.npmjs.com/package/dyson)\r\n[![dependencies](https://img.shields.io/david/webpro/dyson.svg?style=flat)](https://david-dm.org/webpro/dyson)\r\n![npm version](https://img.shields.io/node/v/dyson.svg?style=flat)\r\n\r\n## Introduction\r\n\r\nDyson allows you to define JSON endpoints based on a simple `template` object:\r\n\r\n![input-output](http://webpro.github.com/dyson/input-output.png)\r\n\r\nWhen developing client-side applications, for data usually either static JSON files are used, or an actual server, backend, datastore, API, you name it. Sometimes static files are too static, and sometimes an actual server is not available, not accessible, or too tedious to setup.\r\n\r\nThis is where dyson comes in. Get a full fake server for your application up and running in minutes.\r\n\r\n## Overview\r\n\r\n* Easy configuration, extensive options\r\n* Dynamic responses\r\n    * Responses can use request data (e.g. to simulate different login scenarios based on username):\r\n        * Request path\r\n        * GET/POST parameters\r\n        * Cookies\r\n    * Respond with different status code for specific requests (e.g. 404 for `?id=999`)\r\n    * Includes random data generators\r\n* Supports to proxy non-configured endpoints to actual services\r\n* Supports GET, POST, PUT, DELETE, PATCH (and OPTIONS)\r\n* Supports CORS\r\n* Supports delayed responses\r\n* Includes dummy image generator\r\n    * Use any external or local image service (included)\r\n    * Supports base64 encoded image strings\r\n* Supports required parameter validation\r\n\r\n## Endpoint Configuration\r\n\r\nConfigure endpoints using simple objects:\r\n\r\n``` javascript\r\n{\r\n    path: '/user/:id',\r\n    method: 'GET',\r\n    template: {\r\n        id: (params, query, body) =>params.id,\r\n        name: g.name,\r\n        address: {\r\n            zip: g.zipUS,\r\n            city: g.city\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe `path` string is the usual argument provided to [Express](http://expressjs.com/api.html#app.VERB), as in `app.get(path, callback);`.\r\n\r\nThe `template` object may contain properties of the following types:\r\n\r\n* function: the function will be invoked with arguments _(params, query, body, cookies, headers)_\r\n* string, boolean, number, array: returned as-is\r\n* object: will be recursively iterated\r\n* promise: if the function is a promise, it will be replaced with the resolving value\r\n\r\nNote: the `template` can also be a _function_ returning the actual data. The template function itself is also invoked with arguments _(params, query, body, cookies, headers)_.\r\n\r\n## Images\r\n\r\nIn addition to configured endpoints, dyson registers a [dummy image service](http://github.com/webpro/dyson-image) at `/image`. E.g. requesting `/image/300x200` serves an image with given dimensions.\r\n\r\nThis service is a proxy to [Dynamic Dummy Image Generator](http://dummyimage.com/) by [Russell Heimlich](http://twitter.com/kingkool68).\r\n\r\n## Defaults\r\n\r\nThe default values for the configuration objects:\r\n\r\n``` javascript\r\n{\r\n    cache: false,\r\n    delay: false,\r\n    proxy: false,\r\n    size: () => _.random(2,10),\r\n    collection: false,\r\n    callback: response.generate,\r\n    render: response.render\r\n};\r\n```\r\n\r\n* `cache:true` means that multiple requests to the same path will result in the same response\r\n* `delay:number` will delay the response with `number` milliseconds (or between `[n, m]` milliseconds)\r\n* `proxy:false` means that requests to this file can be skipped and sent to the configured proxy\r\n* `size:function` is the number of objects in the collection\r\n* `collection:true` will return a collection\r\n* `callback:function`\r\n    * the provided default function is doing the hard work (but can be overridden)\r\n    * used as middleware in Express\r\n    * must set `res.body` and call `next()` to render response\r\n* `render:function`\r\n    * the default function to render the response (basically `res.send(200, res.body);`)\r\n    * used as middleware in Express\r\n\r\n## Fake data generators\r\n\r\nYou can use _anything_ to generate data. Here are some suggestions:\r\n\r\n* [Faker.js](https://github.com/marak/Faker.js/)\r\n* [Chance.js](http://chancejs.com/)\r\n* [dyson-generators](http://github.com/webpro/dyson-generators)\r\n\r\nJust install the generator(s) in your project to use them in your templates:\r\n\r\n``` bash\r\nnpm install dyson-generators --save-dev\r\n```\r\n\r\nPlease refer to the project pages for usage and examples (here's one [using dyson-generators](https://github.com/webpro/dyson/blob/master/dummy/get/fake.js)).\r\n\r\n## Containers\r\n\r\nContainers can help if you need to send along some meta data, or wrap the response data in a specific way. Just use the `container` object, and return the `data` where you want it. Functions in the `container` object are invoked with arguments _(params, query, data)_:\r\n\r\n``` javascript\r\n{\r\n    path: '/users',\r\n    template: user.template,\r\n    container: {\r\n        meta: (params, query, data) => ({\r\n            userCount: data.length\r\n        }),\r\n        data: {\r\n            all: [],\r\n            the: {\r\n                way: {\r\n                    here: (params, query, data) => data\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd an example response:\r\n\r\n``` javascript\r\n{\r\n    meta: {\r\n        userCount: 2\r\n    },\r\n    data: {\r\n        all: [],\r\n        the: {\r\n            way: {\r\n                here: [\r\n                    {\r\n                        id: 412,\r\n                        name: 'John'\r\n                    },\r\n                    {\r\n                        id: 218,\r\n                        name: 'Olivia'\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Combined requests\r\n\r\nBasic support for \"combined\" requests is available, by means of a comma separated path fragment.\r\n\r\nFor example, a request to `/user/5,13` will result in an array of the responses from `/user/5` and `/user/13`.\r\n\r\nThe `,` delimiter can be [configured](project-configuration) (or disabled).\r\n\r\n## Status codes\r\n\r\nBy default, all responses are sent with a status code `200` (and the `Content-Type: application/json` header).\r\n\r\nThis can be completely overridden with the `status` property, e.g.:\r\n\r\n``` javascript\r\n{\r\n    path: '/feature/:foo?',\r\n    status: (req, res) => {\r\n        if(req.params.foo === '999') {\r\n            res.status(404).send('Feature not found');\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWould result in a `404` when requesting `/feature/999`.\r\n\r\n## JSONP\r\n\r\nOverride the `render` method of the Express middleware in the endpoint definition. In the example below, depending on the existence of the `callback` parameter, either raw JSON response is returned or it is wrapped with the provided callback:\r\n\r\n``` javascript\r\n{\r\n    render: (req, res) => {\r\n        const callback = req.query.callback;\r\n        if (callback) {\r\n            res.append('Content-Type', 'application/javascript');\r\n            res.send(`${callback}(${JSON.stringify(res.body)});`);\r\n        } else {\r\n            res.send(res.body);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## HTTPS\r\n\r\nIf you want to run dyson over https:// you have to provide a self-signed (or authority-signed) certificate into the `options.https` the same way it's required for NodeJS HTTPS to work:\r\n\r\n``` javascript\r\nconst fs = require('fs');\r\n\r\ndyson.bootstrap({\r\n    configDir: `${__dirname}/dummy`,\r\n    port: 3001,\r\n    https: {\r\n        key: fs.readFileSync(`${__dirname}'/certs/sample.key`),\r\n        crt: fs.readFileSync(`${__dirname}/certs/sample.crt`)\r\n    }\r\n});\r\n```\r\n\r\n*Note*: if running HTTPS on port 443, it will require `sudo` privileges.\r\n\r\n## Custom middleware\r\n\r\nIf you need some custom middleware before or after the endpoints are registered, dyson can be initialized programmatically. Then you can use `appBefore` or `appAfter` to install middleware before or after the dyson services are registered, for example:\r\n\r\n``` javascript\r\nconst dyson = require('dyson'),\r\n    path = require('path');\r\n\r\nconst options = {\r\n    configDir: path.join(__dirname, 'services'),\r\n    port: 8765\r\n};\r\n\r\nconst configs = dyson.getConfigurations(options),\r\n    appBefore = dyson.createServer(options),\r\n    appAfter = dyson.registerServices(appBefore, options, configs);\r\n\r\nconsole.log(`Dyson listening at port ${options.port}`);\r\n```\r\n\r\nDyson configuration can also be installed into any Express server:\r\n\r\n``` javascript\r\nconst express = require('express'),\r\n    dyson = require('./lib/dyson'),\r\n    path = require('path');\r\n\r\nvar options = {\r\n    configDir: path.join(__dirname, 'services')\r\n};\r\n\r\nvar myApp = express();\r\nvar configs = dyson.getConfigurations(options);\r\ndyson.registerServices(myApp, options, configs);\r\nmyApp.listen(8765);\r\n```\r\n\r\n## Installation\r\n\r\nThe recommended way to install dyson is to install it locally and put it in your `package.json`:\r\n\r\n``` bash\r\nnpm install dyson\r\n```\r\n\r\nThen you can use it from an `npm-script` in `package.json` using e.g. `npm run mocks`:\r\n\r\n``` json\r\n\"scripts\": {\r\n    \"mocks\": \"dyson stubs\"\r\n}\r\n```\r\n\r\nYou can also install dyson globally to start it from anywhere:\r\n\r\n``` bash\r\nnpm install -g dyson\r\n```\r\n\r\n### Project\r\n\r\nYou can put your configuration files anywhere, but either the configuration must have the `method` property set or the configuration file must be inside a directory representing the method (e.g. `stubs/get/sub/endpoint.js`). Then start the server:\r\n\r\n``` bash\r\ndyson [dir]\r\n```\r\n\r\nThis starts the services configured in `[dir]` at [localhost:3000](http://localhost:3000).\r\n\r\nYou can also provide an alternative port number by just adding it as a second argument (e.g. `dyson path/ 8181`).\r\n\r\n### Demo\r\n\r\nFor a demo project, see [webpro/dyson-demo](https://github.com/webpro/dyson-demo). This demo was also installed with [now.sh](https://zeit.co/now/) to [dyson-demo-npzwhgjdor.now.sh](https://dyson-demo-npzwhgjdor.now.sh).\r\n\r\n## Project Configuration\r\n\r\nOptionally, you can put a `dyson.json` file next to the configuration folders (inside `[dir]`). It enables to configure some behavior of dyson:\r\n\r\n``` json\r\n{\r\n    \"multiRequest\": \",\",\r\n    \"proxy\": true,\r\n    \"proxyHost\": \"http://dyson.jit.su\",\r\n    \"proxyPort\": 8080,\r\n    \"proxyDelay\": [200, 800]\r\n}\r\n```\r\n\r\n* Setting `multiRequest` to `false` disables the [combined requests](#combined-requests) feature.\r\n* Setting `bodyParserJsonLimit` or `bodyParserUrlencodedLimit` to `1mb` increases the limit to 1mb from the bodyParser's default of 100kb.\r\n* By default, the `proxy` is set to `false`\r\n\r\n## Development & run tests\r\n\r\n``` bash\r\ngit clone git@github.com:webpro/dyson.git\r\ncd dyson\r\nnpm install\r\nnpm test\r\n```\r\n\r\n## Articles about dyson\r\n\r\n* [Stubbing Network Calls (Api) Using Dyson for Emberjs Apps](http://nepalonrails.com/blog/2014/03/stubbing-network-calls-api-using-dyson-for-emberjs-apps/)\r\n* [Our Ember.js Toolchain](http://nebulab.it/blog/our-ember-js-toolchain)\r\n* [Dyson, construye un servidor de pruebas que devuelva fake JSON para simular una API](http://www.genbetadev.com/herramientas/dyson-construye-un-servidor-de-pruebas-que-devuelva-fake-json-para-simular-una-api)\r\n* [Mockear la capa back con Dyson](http://www.adictosaltrabajo.com/tutoriales/tutoriales.php?pagina=DysonFakeJSON)\r\n* [Serve JSONP in Dyson](https://grysz.com/2015/12/01/serve-jsonp-in-dyson/)\r\n\r\n## License\r\n\r\n[MIT](http://webpro.mit-license.org)\r\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/webpro/dyson.git"
  },
  "scripts": {
    "fix": "eslint lib --fix",
    "lint": "eslint lib",
    "test": "make test"
  },
  "version": "1.0.0"
}
